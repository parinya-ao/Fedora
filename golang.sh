#!/usr/bin/env bash

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á progress bar ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢ (‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ # ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤)
progress_bar() {
  local progress=$1
  local width=40
  local filled=$(( progress * width / 100 ))
  local empty=$(( width - filled ))
  # ‡∏™‡∏£‡πâ‡∏≤‡∏á string ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
  local bar=""
  for ((i=0; i<filled; i++)); do bar+="#"; done
  for ((i=0; i<empty; i++)); do bar+="."; done
  printf "\r%3d%% [%s]" "$progress" "$bar"
}

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ñ‡∏≤‡∏°‡πÉ‡∏ä‡πà/‡πÑ‡∏°‡πà (yes/no) ‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
ask_yes_no() {
  local prompt="$1"
  while true; do
    read -rp "$prompt (y/n): " ans
    case "$ans" in
      [Yy]*) return 0 ;;   # yes -> ‡∏£‡∏µ‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô 0 (true)
      [Nn]*) return 1 ;;   # no  -> ‡∏£‡∏µ‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô 1 (false)
      *) echo "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå y ‡∏´‡∏£‡∏∑‡∏≠ n." ;;
    esac
  done
}

# 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
echo "üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° CPU..."
arch=""
uname_m=$(uname -m)
case "$uname_m" in
  x86_64) arch="amd64" ;;
  aarch64) arch="arm64" ;;
  armv7l) arch="armv6l" ;;  # Go ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ armv6l ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ARM 32-bit
  *)
    echo "‚ùó ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° $uname_m ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏î‡∏¢‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ"
    echo "‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ"
    exit 1
    ;;
esac

# 2. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ URL ‡πÑ‡∏ü‡∏•‡πå Go ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°
echo "üåê ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á Go ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö linux-$arch..."
download_page="https://go.dev/dl/"
# ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô goX.Y.Z.linux-ARCH.tar.gz ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
filename=$(curl -s "$download_page" | grep -oE "go[0-9]{1,2}\.[0-9]{1,2}(\.[0-9]{1,2})?\.linux-$arch\.tar\.gz" | head -n1)
if [[ -z "$filename" ]]; then
  echo "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö $arch ‡πÑ‡∏î‡πâ"
  echo "‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏≠‡∏á"
  exit 1
fi
url="https://go.dev/dl/$filename"
echo "‚¨áÔ∏è  ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå $filename"
echo "    ‡∏à‡∏≤‡∏Å $url"

# 3. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
echo "üì• ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Go..."
tempfile="$HOME/Downloads/$filename"  # ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏µ‡πà ~/Downloads
rm -f "$tempfile"
# ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á progress bar ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°
curl -L "$url" -o "$tempfile" --silent &
curl_pid=$!
# ‡πÅ‡∏™‡∏î‡∏á progress bar ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
current=0
while kill -0 $curl_pid 2>/dev/null; do
  # ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡πà‡∏≤ progress ‡πÄ‡∏û‡∏¥‡πà‡∏° 1-15 ‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á
  increment=$((RANDOM % 15 + 1))
  current=$((current + increment))
  # ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 99 ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
  if [ $current -gt 99 ]; then
    current=99
  fi
  progress_bar "$current"
  sleep 0.1
done
# ‡∏£‡∏≠‡πÉ‡∏´‡πâ curl ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
wait $curl_pid
curl_status=$?
# ‡πÅ‡∏™‡∏î‡∏á 100% ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
progress_bar 100
printf "\n"  # ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á)
if [ $curl_status -ne 0 ] || [[ ! -f "$tempfile" ]]; then
  echo "‚ùå ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏û‡∏ö"
  exit 1
fi

# 4. ‡∏ñ‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö /usr/local/go ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
if [[ -d "/usr/local/go" ]]; then
  if ask_yes_no "‡∏û‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå /usr/local/go (Go ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤) ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?"; then
    echo "üîÅ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö /usr/local/go ‡πÄ‡∏Å‡πà‡∏≤..."
    sudo rm -rf /usr/local/go || { echo "‚ùå ‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"; exit 1; }
  else
    echo "‚ö†Ô∏è  ‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå /usr/local/go ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ (‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏•‡∏á‡πÑ‡∏õ)"
  fi
fi

# 5. ‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå tar ‡πÑ‡∏õ‡∏¢‡∏±‡∏á /usr/local
echo "üì¶ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á (‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå) ‡πÑ‡∏õ‡∏ó‡∏µ‡πà /usr/local (‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ sudo)..."
sudo tar -C /usr/local -xzf "$tempfile" || { echo "‚ùå ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"; exit 1; }

# 6. ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå tar ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
rm -f "$tempfile"

# 7. ‡πÄ‡∏û‡∏¥‡πà‡∏° PATH ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ GOPATH/GOBIN ‡πÉ‡∏ô config ‡∏Ç‡∏≠‡∏á shell
echo "üîß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå config ‡∏Ç‡∏≠‡∏á shell..."
user_shell=""
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ SHELL (shell ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á user) ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô fish, zsh ‡∏´‡∏£‡∏∑‡∏≠ bash
case "$(basename "$SHELL")" in
  fish) user_shell="fish" ;;
  zsh) user_shell="zsh" ;;
  bash) user_shell="bash" ;;
  *) user_shell="" ;;
esac

# ‡πÑ‡∏ü‡∏•‡πå config ‡∏ï‡∏≤‡∏°‡∏ä‡∏ô‡∏¥‡∏î shell
fish_config="$HOME/.config/fish/config.fish"
bash_config="$HOME/.bashrc"
zsh_config="$HOME/.zshrc"

# ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°
path_line_export='export PATH=$PATH:/usr/local/go/bin'
gopath_line_export='export GOPATH=$HOME/go'
gobin_line_export='export GOBIN=$HOME/go/bin'
path_line_fish='set -gx PATH /usr/local/go/bin $PATH'
gopath_line_fish='set -gx GOPATH $HOME/go'
gobin_line_fish='set -gx GOBIN $GOPATH/bin'

if [[ "$user_shell" == "fish" ]]; then
  # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå config fish ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
  mkdir -p "$(dirname "$fish_config")"
  # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏ô config.fish ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
  if [[ ! -f "$fish_config" ]] || ! grep -Fq "/usr/local/go/bin" "$fish_config"; then
    echo -e "\n# Go (added by install script)" >> "$fish_config"
    echo "$path_line_fish" >> "$fish_config"
    echo "$gopath_line_fish" >> "$fish_config"
    echo "$gobin_line_fish" >> "$fish_config"
    echo "‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PATH/GOPATH ‡πÉ‡∏ô $fish_config ‡πÅ‡∏•‡πâ‡∏ß"
  else
    echo "‚ÑπÔ∏è ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ /usr/local/go/bin ‡πÉ‡∏ô $fish_config ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß (‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° PATH)"
  fi
elif [[ "$user_shell" == "zsh" ]]; then
  if [[ ! -f "$zsh_config" ]] || ! grep -Fq "/usr/local/go/bin" "$zsh_config"; then
    echo -e "\n# Go (added by install script)" >> "$zsh_config"
    echo "$path_line_export" >> "$zsh_config"
    echo "$gopath_line_export" >> "$zsh_config"
    echo "$gobin_line_export" >> "$zsh_config"
    echo "‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PATH/GOPATH ‡πÉ‡∏ô $zsh_config ‡πÅ‡∏•‡πâ‡∏ß"
  else
    echo "‚ÑπÔ∏è ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ /usr/local/go/bin ‡πÉ‡∏ô $zsh_config ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß"
  fi
elif [[ "$user_shell" == "bash" ]]; then
  if [[ ! -f "$bash_config" ]] || ! grep -Fq "/usr/local/go/bin" "$bash_config"; then
    echo -e "\n# Go (added by install script)" >> "$bash_config"
    echo "$path_line_export" >> "$bash_config"
    echo "$gopath_line_export" >> "$bash_config"
    echo "$gobin_line_export" >> "$bash_config"
    echo "‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PATH/GOPATH ‡πÉ‡∏ô $bash_config ‡πÅ‡∏•‡πâ‡∏ß"
  else
    echo "‚ÑπÔ∏è ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ /usr/local/go/bin ‡πÉ‡∏ô $bash_config ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß"
  fi
else
  # ‡∏ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡πÑ‡∏°‡πà‡∏û‡∏ö shell ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
  echo "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö shell ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠ shell ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà bash/zsh/fish"
  echo "‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå config shell ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° PATH /usr/local/go/bin ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà"
fi

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå $HOME/go/bin ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GOBIN)
mkdir -p "$HOME/go/bin"

# 8. ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå config (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö shell ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
if [[ "$user_shell" == "fish" && -f "$fish_config" ]]; then
  echo "üîÅ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î $fish_config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤ PATH ‡∏°‡∏µ‡∏ú‡∏•..."
  # ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å fish ‡πÄ‡∏û‡∏∑‡πà‡∏≠ source config.fish
  fish -c "source $fish_config"
elif [[ "$user_shell" == "zsh" && -f "$zsh_config" ]]; then
  echo "üîÅ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î $zsh_config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤ PATH ‡∏°‡∏µ‡∏ú‡∏•..."
  # ‡πÇ‡∏´‡∏•‡∏î config zsh ‡πÉ‡∏ô‡πÄ‡∏ä‡∏•‡∏•‡πå‡∏¢‡πà‡∏≠‡∏¢
  zsh -c "source $zsh_config"
elif [[ "$user_shell" == "bash" && -f "$bash_config" ]]; then
  echo "üîÅ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î $bash_config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤ PATH ‡∏°‡∏µ‡∏ú‡∏•..."
  # ‡πÉ‡∏ä‡πâ source ‡πÉ‡∏ô subshell bash
  source "$bash_config"
fi

# 9. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Go ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
if command -v go >/dev/null 2>&1; then
  go_ver=$(go version)
  echo "üéâ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á $go_ver ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"
else
  echo "‚ùó ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á 'go' ‡πÉ‡∏ô PATH ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏°‡∏¥‡∏ô‡∏±‡∏•‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô 'source' ‡πÑ‡∏ü‡∏•‡πå config"
fi
